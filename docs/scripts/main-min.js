var movieSelected=!1;function nSlider(){const e=$("#nslide"),t=$("#nslide ~ .label-container .label"),a=e.attr("min"),n=e.attr("max");var o=e.val(),r=(o-a)/(n-a);t.css("left",100*r+"%"),t.html(o),e.on("input",(function(){o=e.val(),r=(o-a)/(n-a),t.css("left",100*r+"%"),t.html(o)}))}function ICselect(){$(".IC-option").on("click",(function(){$(".IC-option").attr("data-selected","false"),$(this).attr("data-selected","true")}))}function nodeSelect(){$(".node").on("click",(function(){$(".node").attr("data-selected","false"),$(this).attr("data-selected","true")}))}function drawParameterWidget(){const e=$(".parameter-widget .xtick");for(i=0;i<e.length;i++)$(e[i]).html(i);const t=$("#nslide").val(),a=$('input[name="targ"]:checked').val(),n=$('input[name="man"]:checked').val(),o=$('.IC-option[data-selected="true"]').attr("data-spec");var r="";n&&(r=n.toUpperCase()[0]);const c=$(".parameter-widget .node");$(c[0]).css("width");var l,d,s,u,p,m,h;for(i=0;i<c.length;i++)u=(l=$(c[i])).attr("data-cond"),p=parseInt(u[0]),m=u[1],h=parseInt(u.substr(3,3)),icSpec=u.substr(7,2),p!=a||m!=r||h!=t||icSpec!=o?(l.css("opacity","0"),l.css("pointer-events","none"),l.attr("data-selected","false")):(l.css("opacity","1"),l.css("pointer-events","auto")),mu=l.attr("data-mu"),s=30*l.attr("data-nu"),d=100/e.length*mu,l.css("left",d+"%"),l.css("bottom",s+"%")}function redrawParameterWidget(){$(".button-row").change(drawParameterWidget),$("#nslide").change(drawParameterWidget),$(".IC-option").click(drawParameterWidget),$(".node").click(drawParameterWidget)}function serveVideo(){const e={torus_n300tar0mu0_87nu2icUU:'<iframe class="vid" width="560" height="315" src="https://www.youtube.com/embed/kz3RPHTv7N0?autoplay=1&playlist=kz3RPHTv7N0&loop=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>',torus_n300tar0mu1_73nu2icUU:"",torus_n300tar0mu3_46nu2icUU:"",torus_n300tar0mu0_87nu1icUU:"",torus_n300tar0mu1_73nu1icUU:"",torus_n300tar0mu3_46nu1icUU:"",torus_n300tar0mu0_87nu0_5icUU:""};$(".player").html("<p>Select options to view simulation</p>");const t=$("#nslide").val(),a=$('input[name="targ"]:checked').val(),n=$('input[name="man"]:checked').val(),o=$('[data-selected="true"]');if(movieSelected=!1,2==o.length){movieSelected=!0;const r=$(o[0]).attr("data-spec"),i=$(o[1]).attr("data-mu").replaceAll(".","_"),c=$(o[1]).attr("data-nu").replaceAll(".","_");if(t&&a&&n&&r&&i&&c){const o=n+"_n"+t+"tar"+a+"mu"+i+"nu"+c+"ic"+r;$(".player").html(e[o])}}}function callVideo(){$(".button-row").change(serveVideo),$("#nslide").change(serveVideo),$(".IC-option").click(serveVideo),$(".node").click(serveVideo)}function getParamsFromURL(){const e=window.location.search,t=new URLSearchParams(e);if(t.has("n")&&t.has("numtar")&&t.has("dom")&&t.has("ic")&&t.has("mu")&&t.has("nu")){const e=parseInt(t.get("numtar")),d=t.get("dom"),s=parseInt(t.get("n")),u=t.get("ic"),p=parseFloat(t.get("mu")),m=parseFloat(t.get("nu")),h=$("#nslide"),v=h.attr("min"),g=h.attr("max"),f=h.attr("step");var a=!1;s>=v&&s<=g&&(s-v)%f==0&&(a=!0,console.log("blah"),h.val(s));const w=$("#target-selector input");var n;for(e>=0&&e<=3&&!0,i=0;i<w.length;i++)if(n=w[i],$(n).val()==e){$(n).prop("checked",!0);break}const k=$("#dom-selector input");var o;for(0!=d.localeCompare("torus")&&0!=d.localeCompare("sphere")||!0,i=0;i<k.length;i++)if(o=k[i],0==$(o).val().localeCompare(d)){$(o).prop("checked",!0);break}const b=$(".IC-option");var r=!1;for(i=0;i<b.length;i++)if(0==$(b[i]).attr("data-spec").localeCompare(u.toUpperCase())){$(b[i]).attr("data-selected","true"),r=!0;break}const y=$(".parameter-widget .node");var c=!1,l=y[0];for(i=0;i<y.length;i++)(l=$(y[i])).attr("data-mu")==p&&l.attr("data-nu")==m&&(c=!0,l.attr("data-selected","true"));a&&r&&c&&(movieSelected=!0)}}function copyLink(){const e=$(".share-button");e.click((function(){if(movieSelected){const a=$("#nslide").val(),n=$('input[name="targ"]:checked').val(),o=$('input[name="man"]:checked').val(),r=$('.IC-option[data-selected="true"]').attr("data-spec"),i=$('.node[data-selected="true"]'),c=i.attr("data-mu"),l=i.attr("data-nu");var t=new URLSearchParams;t.append("n",a),n&&t.append("numtar",n),o&&t.append("dom",o),r&&t.append("ic",r),c&&t.append("mu",c),l&&t.append("nu",l);copyToClipboard(window.location.origin+window.location.pathname+"?"+t.toString())&&e.html("link copied!")}else e.html("no selection");setTimeout((function(){e.html("copy link")}),3e3)}))}function copyToClipboard(e){const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.bottom="-10px",document.body.appendChild(t),t.select();const a=document.execCommand("copy");return document.body.removeChild(t),a}$(document).ready((function(){getParamsFromURL(),nSlider(),ICselect(),drawParameterWidget(),redrawParameterWidget(),nodeSelect(),serveVideo(),callVideo(),copyLink()}));