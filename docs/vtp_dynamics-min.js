function rescale(t,e,n,a,r){return a||(a=0),r||(r=1),(n-e)*(t-a)/(r-a)+e}function interleave(t,e){if(t.length!=e.length)throw"inputs must have the same length";C=new Array(2*t.length);for(let n=0;n<t.length;n++)C[2*n]=t[n],C[2*n+1]=e[n];return C}$(document).ready((()=>{let t=500,e=Math.sqrt(t)/2,n=[-e,-e,e,e],a=new VTPState(t,1,20),r=1;a.randomize(n),a.addTargetComponent([0,0]);const o=document.getElementById("canvas");let l;setInterval((()=>{a.render(o,n.map((t=>t*r)))}),40);const i=$("#playbutton input");i.change((()=>{i.prop("checked")?l=setInterval((()=>{a.step(),$("#treadout").html(a.iteration)}),40):clearInterval(l)})),$("#zoomin").on("click",(()=>r/=1.1)),$("#zoomout").on("click",(()=>r*=1.1));const m=$("#textField-N");m.val(a.numAgents),$("#nForm").submit((()=>{if(t=parseInt(m.val()),!isNaN(t)&&t>0){e=Math.sqrt(t)/2,n=[-e,-e,e,e];let o=a.alignmentStrength;a=new VTPState(t,1,o),a.randomize(n),a.addTargetComponent([0,0]),r=1}}));const s=$("#textField-nu");s.val(a.alignmentStrength),$("#alignmentStrengthForm").submit((()=>{const t=parseFloat(s.val());!isNaN(t)&&t>0&&(a.alignmentStrength=t)})),$("#export").on("click",(()=>{a.exportData()}))}));