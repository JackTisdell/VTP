function rescale(e,t,n,a,o){return a||(a=0),o||(o=1),(n-t)*(e-a)/(o-a)+t}function interleave(e,t){if(e.length!=t.length)throw"inputs must have the same length";C=new Array(2*e.length);for(let n=0;n<e.length;n++)C[2*n]=e[n],C[2*n+1]=t[n];return C}$(document).ready((()=>{let e=500,t=Math.sqrt(e)/2,n=[-t,-t,t,t],a=new VTPState(e,1,20),o=1;a.randomize(n),a.addTargetComponent([0,0]);const l=document.getElementById("canvas");let r;setInterval((()=>{a.render(l,n.map((e=>e*o)))}),40);const i=$("#playbutton input");i.change((()=>{i.prop("checked")?r=setInterval((()=>{a.step(),$("#treadout").html(a.iteration)}),40):clearInterval(r)})),$("#zoomin").on("click",(()=>o/=1.1)),$("#zoomout").on("click",(()=>o*=1.1));const c=$("#modeltoggle-cb");c.change((()=>{c.prop("checked")?a.speedModel="leading straight cone":a.speedModel="leading geodesic"}));const s=$("#textField-N");s.val(a.numAgents),$("#nForm").submit((()=>{if(e=parseInt(s.val()),!isNaN(e)&&e>0){t=Math.sqrt(e)/2,n=[-t,-t,t,t];let l=a.alignmentStrength;a=new VTPState(e,1,l),a.randomize(n),a.addTargetComponent([0,0]),o=1}}));const g=$("#textField-nu");g.val(a.alignmentStrength),$("#alignmentStrengthForm").submit((()=>{const e=parseFloat(g.val());!isNaN(e)&&e>0&&(a.alignmentStrength=e)})),$("#export").on("click",(()=>{a.exportData()}))}));